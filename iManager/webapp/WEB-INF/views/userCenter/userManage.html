<!DOCTYPE html>
<html data-ng-app="App">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Expires" content="-1">
	    <meta http-equiv="Cache-Control" content="no-cache">
	    <meta http-equiv="Pragma" content="no-cache">
		<title translate="PROJECT_TITLE"></title>
		
		<!-- Plugin Css -->
    	<link href="../../plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    	<link href="../../plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    	<link href="../../plugins/material-design-preloader/md-preloader.css" rel="stylesheet" />
    	<link href="../../plugins/bootstrap-select/css/bootstrap-select.css" rel="stylesheet" />
    	<link href="../../plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.min.css" rel="stylesheet" />
    	<link href="../../plugins/node-waves/waves.min.css" rel="stylesheet" />
   	 	<link href="../../plugins/sweetalert/sweetalert.css" rel="stylesheet" />
    	<link href="../../plugins/animate-css/animate.css" rel="stylesheet" />
    	
	    <!-- Custom Css -->
    	<link href="../../css/custom.css" rel="stylesheet">
	    <link href="../../css/themes/default/skin.css" rel="stylesheet" type="text/css" title="default"/>
		
	    <!-- Bootstrap JS -->
	    <script src="../../plugins/jquery/jquery-2.2.4.min.js"></script>
	    <script src="../../plugins/bootstrap/js/bootstrap.min.js"></script>
	    <script src="../../plugins/angular/angular.min.js"></script>
	    <script src="../../plugins/ocLazyLoad/ocLazyLoad.min.js"></script>
	    <script src="../../plugins/bootstrap-select/js/bootstrap-select.js"></script>
	    <script src="../../plugins/jquery-slimscroll/jquery.slimscroll.js"></script>
	    <script src="../../plugins/bootstrap-select/js/i18n/defaults-zh_CN.js"></script>
	    <script src="../../plugins/bootstrap-notify/bootstrap-notify.js"></script>
	    <script src="../../plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js"></script>
	    <script src="../../plugins/node-waves/waves.js"></script>
	    <script src="../../plugins/sweetalert/sweetalert.min.js"></script>
	    <script src="../../js/ui/dialogs.js"></script>
	    <script src="../../js/ui/modals.js"></script>
	    <script src="../../js/ui/notifications.js"></script>
	    <script src="../../js/ui/tooltips-popovers.js"></script>
	    <script src="../../js/ui/load_resize.js"></script>
	    <script src="../../plugins/angular/angular-translate.min.js"> </script>
	    <script src="../../plugins/angular/angular-translate-loader-static-files.min.js"> </script> 
	    <!--Global JS -->
	    <script src="../../js/server/server.js" type="text/javascript"></script>
		<script src="../../js/cookie.js" type="text/javascript"></script>
		<script src="../../js/skin.js" type="text/javascript"></script>
		<script src="../../js/config/config_skin.js" type="text/javascript"></script>
		<script src="../../js/errcode/errcode.js" type="text/javascript"></script>
		<script src="../../js/App.js" type="text/javascript"></script>
		<script src="../../js/home.js" type="text/javascript"></script>
	    
	    <!--Tree CSS-->
		<link href="../../js/tree/css/demo.css" type="text/css" rel="stylesheet">
		<link href="../../js/tree/css/zTreeStyle/zTreeStyle.css" type="text/css" rel="stylesheet">
	    
		<!--Tree Js-->
		<script src="../../js/tree/js/jquery.ztree.core-3.5.js" type="text/javascript"></script>
		<script src="../../js/template/leftMenu.js" type="text/javascript"></script>
		<script src="../../js/template/leftMenuData.js" type="text/javascript"></script>
		<script src="../../js/userCenter/tree_check.js"type="text/javascript"></script>
		<!--Pages JS--->
		<script src="../../js/pages/pageNav.js" type="text/javascript"></script>
		<script src="../../js/userCenter/userManage/listTemp.js" type="text/javascript"></script>
        <script src="../../js/userCenter/userManage/manager.js" type="text/javascript"></script>
        <style>
         
          .searchPanel .select-group button{
              line-height: 18px;
              padding-top:5px;
              padding-bottom:5px;
          }
          @media(min-width:769px){
             .user-search .m-b-15 {margin-bottom:0;} 
             .user-search .m-t-15{margin-top:0;}
          }
          .user-search  label{text-align:right;}
          
          .table td, .table th{
          	  position:relative;
          }
          
          .table .btn-default.pull-right {
           	  position:absolute;
           	  right:5px;
          }
          #box .table_space{white-space:pre-wrap;}
        </style>
	</head>
	<body ng-controller="app">
	    <div class="page-loader-wrapper" ng-include="'../include/loading.html'"></div>
	    <div class="overlay"></div>
		<div id="wrapper" ng-init="getUserList(0);" ng-controller="userManageController">
			<div class="header" ng-include="'../include/header.html'"></div>
			<div class="menus" ng-include="'../include/leftMenu.html'"  ></div>
			<div id="page-wrapper" ng-hide="mainpage_flag">
                <div class="panel">
					<div class="panel-heading">
						<h2 class="panel-title" translate="USER_MANAGE.USER_MANAGEMENT.USER_LIST"></h2>
						<span class="abs pull-right-20"><button type="button"  class="btn btn-primary waves-effect pull-right "  onclick="userManage.openEditWin();"  translate="USER_MANAGE.BUTTON_NAME.ADD_USER"></button></span>
					</div>
					<div class="panel-body">
					    <div class="form-column user-search" ng-include="'../include/userCenterTemp/user_search.html'"></div>
						<div class="row clearfix">
							<div class="col-lg-12">
								<div class="table-responsive">
	                				<table class="table table-striped table-bordered table-hover ">
					                    <thead>
					                    	<tr>
					                    		<th><!-- <span class="checkbox-inline"><input type="checkbox" class="filled-in chk-col-blue" id="che_0" ng-click="checkAll()" /><label for="che_0"></label></span> --></th>
					                       		<th class="text-center" translate="USER_MANAGE.USER_MANAGEMENT.NAME"></th>
					                       		<th class="text-center" translate="USER_MANAGE.USER_MANAGEMENT.ACCOUNT"></th>
					                       		<th class="text-center" translate="USER_MANAGE.USER_MANAGEMENT.MOBILE_PHONE"></th>
					                       		<th class="text-center" translate="USER_MANAGE.USER_MANAGEMENT.ROLE"></th>
					                       	    <th class="text-center" translate="USER_MANAGE.USER_MANAGEMENT.REVIEVED_STATUS"></th> 
					                       		<th class="text-center" translate="USER_MANAGE.USER_MANAGEMENT.CREAT_TIME"></th>
					                       		<th class="text-center" translate="USER_MANAGE.USER_MANAGEMENT.USAGE_STATUS"></th>
					                       		<th class="text-center" translate="USER_MANAGE.USER_MANAGEMENT.ACTION"></th>
					                       </tr>
					                    </thead>
					                    <tbody class=""><!--tbody的class名不能为‘show’,否则表格不能自动撑开-->
						                  	<tr id="box" ng-repeat="data in list">
						                  		<td style="width: 5%;"><span class="checkbox-inline">
						                  		<input type="checkbox" class="filled-in chk-col-grey" id="{{$index}}" 
						                  		        ng-disabled="data.username=='admin'?true:false" data-admin="{{data.username=='admin'?true:false}}" />
						                  		<label for="{{$index}}"></label></span></td>
					                        	<td style="width: 15%;" class="table_space">{{data.firstname}}</td>
					                        	<td style="width: 15%;" class="table_space">{{data.username}}</td>
					                            <td style="width: 15%;" class="text-break table_space">{{data.phone}}</td>
				                            	<td style="width: 20%;" class="text-break table_space"><span ng-repeat="role in data.roles" ng-if="!$last">{{role.name}}、</span><span ng-repeat="role in data.roles" ng-if="$last">{{role.name}}</span></td>
				                            	<td style="width: 10%;">{{data.approvalStatus == 1? userInfoList.approve:(data.approvalStatus == 0? userInfoList.noReviewed:userInfoList.reject)}}
				                            	    <button class="btn btn-default pull-right waves-effect" 
				                            	            ng-click="checkStatus(data.id,data.approvalStatus);" 
				                            	            style="padding: 0px 5px;box-shadow: none;background-color:transparent!important" >
				                            	    	<i class="fa" ng-class="getIcon(data.approvalStatus)" 
				                            	    	   style="font-size:18px;top:0px;"></i>
				                            	    </button> 
				                                </td>
				                            	<td style="width: 10%;">{{data.createTime | jsonDate:'yyyy-MM-dd'}}</td>
				                            	<td style="width: 10%;">{{data.isDisabled==1?userInfoList.invalid:userInfoList.inUse}}
					                            	    <button class="btn btn-default pull-right waves-effect" btn-permission="UserManage:disable" 
					                            	            ng-click="changeStatus($index,data.isDisabled,data.approvalStatus);" 
					                            	            ng-show="statusBtnFlag(data.approvalStatus,data.username)"
					                            	            style="padding: 0px 5px;box-shadow: none;background-color:transparent!important">
					                            	    	<i class="fa" ng-class="{true:'fa-pause col-grey',false:'fa-play col-green'}[data.isDisabled==1]" 
					                            	    	   style="font-size:10px;top:0px;"></i>
					                            	    </button> 
				                                </td>
			                           			<td style="width: 10%; text-align: center" >
			                           			    <a href="javascript:;" ng-hide="data.username=='admin'?true:false" class="p-r-10" ng-click="resetPwdRow($index)" title="{{'USER_MANAGE.USER_MANAGEMENT.RESET_PASSWORD'|translate}}"><i class="fa fa-key"></i></a>
				                                	<a href="javascript:;" ng-hide="data.username=='admin'?true:false" class="p-r-10" ng-click="editRow($index)" title="{{'USER_MANAGE.BUTTON_NAME.EDIT'|translate}}"><i class="fa fa-pencil"></i></a>
				                                	<a href="javascript:void(0);" ng-hide="data.username=='admin'?true:false" class="p-r-10" ng-click="deleteRow($index)" title="{{'USER_MANAGE.BUTTON_NAME.DELETE'|translate}}"><i class="fa fa-trash-o"></i></a>
			                            		</td>
		               						</tr>
					                    </tbody>
					                </table>
					           </div>
							</div>
							<!-- / .col-lg-12 -->
							<div class="col-lg-12 ng-hide" style="text-align: center" ng-show="list.length==0">
					    		<span class="error-block">
					    			<span translate="USER_MANAGE.TIPS.NO_DATA"></span>
					    		</span>
							</div>
							<!-- / .col-lg-12 -->
							<div class="col-lg-12 align-right">
								<div class="dataTables_paginate">
                   					<ul class="pagination pagination_reset" id="pageNav" data-ng-init="showInFo()"></ul>
                   				</div>
							</div>
							<!-- / .col-lg-12 -->
						</div>
						<!-- / .row -->
					</div>
				</div>
				<!-- / .panel -->
			</div>
			<div class="modal fade" id="resetpwdWin" tabindex="-1" role="dialog" data-backdrop="static" aria-labelledby="myModalLabel" aria-hidden="true">
				<div ng-include="'../include/userCenterTemp/resetPwd.html'" ></div>
			</div>
		</div>
		<!-- / #wrapper -->
	</body>
</html>
